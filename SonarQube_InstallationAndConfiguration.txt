What is SonarQube?

SonarQube is a static code analysis platform used to detect bugs, vulnerabilities, code smells, and enforce quality gates.

1ï¸âƒ£ Prerequisites
ğŸ”¹ System Requirements

Java 17 (mandatory for SonarQube 9.x+)

OS: Windows / Linux / macOS

RAM: Minimum 4 GB (8 GB recommended)

Disk: 5â€“10 GB

ğŸ”¹ Verify Java
java -version

2ï¸âƒ£ Download SonarQube

Go to SonarQube official site

Download Community / Developer / Enterprise edition

Extract the ZIP file

Example:

sonarqube-9.x.x

3ï¸âƒ£ SonarQube Directory Structure (Important)
sonarqube
â”‚
â”œâ”€â”€ bin          â†’ Startup scripts
â”œâ”€â”€ conf         â†’ Configuration
â”œâ”€â”€ data         â†’ Index data
â”œâ”€â”€ extensions   â†’ Plugins
â”œâ”€â”€ logs         â†’ Logs

4ï¸âƒ£ Configure SonarQube (sonar.properties)

ğŸ“„ sonarqube/conf/sonar.properties

ğŸ”¹ Minimal Configuration (Local Setup)
sonar.host.url=http://localhost:9000

ğŸ”¹ Database Configuration (Recommended for Enterprise)
sonar.jdbc.username=sonar
sonar.jdbc.password=sonar
sonar.jdbc.url=jdbc:postgresql://localhost:5432/sonarqube


ğŸ“Œ Note:

H2 DB â†’ Only for demo

PostgreSQL â†’ Production standard

5ï¸âƒ£ Start SonarQube
ğŸ”¹ Windows
cd sonarqube/bin/windows-x86-64
StartSonar.bat

ğŸ”¹ Linux / macOS
cd sonarqube/bin/linux-x86-64
./sonar.sh start

ğŸ”¹ Verify

Open browser:

http://localhost:9000

6ï¸âƒ£ First-Time Login
Field	Value
Username	admin
Password	admin

â¡ Youâ€™ll be prompted to change password

7ï¸âƒ£ Create SonarQube Token (Very Important)

Go to My Account â†’ Security

Generate token (e.g. jenkins-token)

Copy and store securely

ğŸ“Œ Used by Jenkins / CI tools

8ï¸âƒ£ Install Sonar Scanner
ğŸ”¹ Option 1: CLI Scanner

Download SonarScanner
Add to PATH

Verify:

sonar-scanner -v

ğŸ”¹ Option 2: Maven Plugin (Most Common)

No separate install needed
Used via:

mvn sonar:sonar

9ï¸âƒ£ Analyze a Project (Quick Test)
ğŸ”¹ Maven Project
mvn clean verify sonar:sonar \
  -Dsonar.projectKey=demo-project \
  -Dsonar.host.url=http://localhost:9000 \
  -Dsonar.login=YOUR_TOKEN

ğŸ”Ÿ Configure Quality Gates
ğŸ”¹ Where
SonarQube â†’ Quality Gates

ğŸ”¹ Typical Rules

No new blocker bugs
Coverage â‰¥ 80%
No critical vulnerabilities

Maintainability rating A

ğŸ“Œ Quality Gate decides build pass/fail in CI

1ï¸âƒ£1ï¸âƒ£ SonarQube with Jenkins (Config Summary)

Install SonarQube Scanner plugin

Add SonarQube server + token

Add pipeline stage:

withSonarQubeEnv('SonarQube') {
    sh 'mvn sonar:sonar'
}

1ï¸âƒ£2ï¸âƒ£ Common Issues & Fixes
Issue	Fix
SonarQube not starting	Check Java 17
Port 9000 busy	Change sonar.web.port
Permission error	Run as non-root user
DB connection fails	Verify JDBC URL
ğŸ¯ Interview-Ready One-Liner

â€œSonarQube is installed by setting up Java, configuring sonar.properties, starting the server, generating tokens, and integrating it with build tools like Maven or Jenkins to enforce quality gates.â€



--------------------------FOR TOKEN - 

add the properties from sonar-project.properties file in settings.xml in m2 repository - 

<settings>
  <servers>
    <server>
      <id>sonar</id>
      <username>sqa_988ad24dd9ca8cf562d733aec4e255f8477ffe7b</username>
    </server>
  </servers>
</settings>


---------------------------------------------- for other properties - 

OPTION 1 (BEST PRACTICE): Move Properties to pom.xml â­

This is the recommended approach for Maven projects.

ğŸ“Œ pom.xml
<properties>
    <sonar.projectKey>SOLIDFramework</sonar.projectKey>
    <sonar.projectName>SOLIDFramework</sonar.projectName>
    <sonar.host.url>http://localhost:9000</sonar.host.url>
    <sonar.sourceEncoding>UTF-8</sonar.sourceEncoding>
    <sonar.sources>src/main/java</sonar.sources>
    <sonar.tests>src/test/java</sonar.tests>
	<sonar.token>sqa_988ad24dd9ca8cf562d733aec4e255f8477ffe7b</sonar.token>

    <!-- Selenium / Cucumber specific -->
    <sonar.exclusions>
        **/target/**,
        **/generated/**,
        **/*Runner.java
    </sonar.exclusions>
</properties>


Then run:  -- this can be triggerred from Jenkins too.

mvn clean verify sonar:sonar -Dsonar.token=XXXX


âœ” Fully supported
âœ” CI/CD friendly
âœ” Interview-safe answer

âœ… OPTION 2: Force Maven to Read sonar-project.properties (Allowed but NOT Recommended)

If you must use sonar-project.properties, do this:

ğŸ“Œ sonar-project.properties
sonar.projectKey=SOLIDFramework
sonar.projectName=SOLIDFramework
sonar.sources=src/main/java
sonar.tests=src/test/java
sonar.java.binaries=target/classes
sonar.exclusions=**/target/**,**/*Runner.java

ğŸ“Œ Command
mvn clean verify sonar:sonar \
-Dsonar.project.settings=sonar-project.properties \
-Dsonar.token=XXXX


âš ï¸ Downsides:

Easy to break in Jenkins

Confusing ownership (Maven vs Sonar)

Not enterprise-preferred

âœ… OPTION 3: Use SonarScanner CLI (Not Maven)

If you want Sonar to natively read sonar-project.properties:

sonar-scanner


But âŒ this bypasses Maven lifecycle, so:
No test execution
No coverage integration
Not recommended for Java projects


âœ… What You Should Use (Final Recommendation) 

Scenario								Best Choice
Maven + Selenium + Cucumber				âœ… pom.xml
Jenkins Pipeline						âœ… pom.xml + settings.xml token
Non-Maven project						sonar-project.properties
Learning only							Either


--------------------------------------------------------SONARCUBE Integration with Jenkins ----------------------------------------------------------


1. Install Jenkins Plugins

			In Jenkins â†’ Manage Jenkins â†’ Plugins install:

			âœ” SonarQube Scanner for Jenkins
			âœ” Maven Integration Plugin


2. 3ï¸âƒ£ Configure SonarQube Server in Jenkins

			Jenkins â†’ Manage Jenkins â†’ Configure System

			ğŸ”¹ SonarQube servers

			Name: SonarQube
			Server URL: http://localhost:9000
			Authentication Token:
			Generate token in SonarQube
			Paste here

			Select - âœ”ï¸ â€œEnvironment variablesâ€

			ğŸ“Œ This creates:

			SONAR_HOST_URL
			SONAR_AUTH_TOKEN
