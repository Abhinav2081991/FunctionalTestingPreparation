What is a Webhook in Jenkins?

A webhook is a mechanism where an external system (GitHub/GitLab/Bitbucket) notifies Jenkins automatically when an event happens (push, PR, merge).

ğŸ“Œ This eliminates polling and makes CI event-driven.

ğŸ§± High-Level Flow
Developer pushes code
        â†“
Git webhook fires
        â†“
Jenkins receives event
        â†“
Declarative pipeline triggers
        â†“
Build / Test / Deploy runs

âœ… Supported SCMs (Most Common)

GitHub

GitLab

Bitbucket

Azure DevOps

Iâ€™ll use GitHub as the reference (same idea everywhere).

1ï¸âƒ£ Jenkins Prerequisites
Install Required Plugins

Git

Pipeline

GitHub Integration

GitHub Branch Source (recommended)

2ï¸âƒ£ Configure Webhook in GitHub
Go to:
Repo â†’ Settings â†’ Webhooks â†’ Add webhook

Set:
Field	Value
Payload URL	http://<jenkins-url>/github-webhook/
Content type	application/json
Events	Just the push event (or PRs)
Active	âœ…

ğŸ“Œ Jenkins endpoint must be publicly reachable (or via ngrok).

3ï¸âƒ£ Jenkins Job Configuration
Option A: Multibranch Pipeline (BEST PRACTICE)

âœ” Auto-detects branches
âœ” Auto-triggers on webhook
âœ” CI-grade

Steps:

New Item â†’ Multibranch Pipeline

Add GitHub repository

Credentials

Enable:

Build when a change is pushed

Option B: Single Pipeline Job

Pipeline â†’ Git SCM

Check:

GitHub hook trigger for GITScm polling

4ï¸âƒ£ Declarative Pipeline (Jenkinsfile)
Minimal Webhook-Triggered Pipeline
pipeline {
    agent any

    triggers {
        githubPush()
    }

    stages {
        stage('Checkout') {
            steps {
                checkout scm
            }
        }

        stage('Build') {
            steps {
                sh 'mvn clean compile'
            }
        }

        stage('Test') {
            steps {
                sh 'mvn verify'
            }
        }
    }
}


âœ” Triggered automatically by webhook
âœ” No polling
âœ” CI/CD ready

5ï¸âƒ£ Branch-Based Execution (VERY IMPORTANT)
pipeline {
    agent any

    stages {
        stage('Build') {
            when {
                branch 'main'
            }
            steps {
                sh 'mvn clean verify'
            }
        }

        stage('Smoke Tests') {
            when {
                branch 'develop'
            }
            steps {
                sh 'mvn test -Dcucumber.filter.tags="@Smoke"'
            }
        }
    }
}


ğŸ“Œ Enables branch-specific behavior.

6ï¸âƒ£ Webhook + Parameters (Advanced)
pipeline {
    agent any

    parameters {
        string(name: 'ENV', defaultValue: 'qa')
    }

    stages {
        stage('Test') {
            steps {
                sh "mvn test -Denv=${params.ENV}"
            }
        }
    }
}


Webhook triggers job â†’ Jenkins uses defaults unless overridden.

7ï¸âƒ£ How Jenkins Knows Itâ€™s a Webhook Trigger

Environment variables auto-injected:

env.GIT_BRANCH
env.GIT_COMMIT
env.GIT_URL


Example:

echo "Triggered by commit: ${env.GIT_COMMIT}"

ğŸš¨ Common Problems & Fixes
Issue	Cause	Fix
Webhook not firing	Jenkins not reachable	Use ngrok
Job not triggered	Trigger not enabled	Enable GitHub hook
Multiple builds	Poll + webhook	Disable polling
Wrong branch built	Single pipeline	Use multibranch
ğŸ§  Senior-Level Best Practices

âœ… Use Multibranch Pipelines
âœ… Avoid SCM polling
âœ… Keep Jenkinsfile in repo
âœ… Separate CI vs CD stages
âœ… Fail fast on test failures

ğŸ¤ Interview-Ready Answer (30 sec)

â€œIn Jenkins, webhooks trigger declarative pipelines automatically when SCM events occur. We configure the webhook in GitHub to call Jenkinsâ€™ endpoint and enable githubPush() or multibranch pipelines. This makes CI event-driven, faster, and more reliable than polling.â€

ğŸ”¥ QA-Specific CI Use Case
stage('Automation Tests') {
    steps {
        sh 'mvn verify -Dcucumber.filter.tags="@Regression"'
    }
}